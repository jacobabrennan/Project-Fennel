'use strict';

const env = require('./env.js');
const mapManager = require('./map_manager.js');
//== END REQUIRES ==== (check for deferred modules) ============================

mapManager.templates = {
    templateStorage: {},
    maps: [],
    mapsBoss: [],
    get(options){
        if(!options){ options = {};}
        let mapName;
        if(options.name){
            mapName = options.name;
        } else if(options.boss){
            mapName = env.arrayPick(this.mapsBoss);
        } else{
            mapName = env.arrayPick(this.maps);
        }
        let result = this.templateStorage[mapName];
        if(result){ return result;}
        return null;
    }
};
const mapTemplate = {
    width: env.DEFAULT_MAP_SIZE,
    height: env.DEFAULT_MAP_SIZE,
    _new(name, textGrid, options){
        this.name = name;
        this.textGrid = textGrid;
        this.boss = options.boss;
        this.openSides = options.openSides || (env.NORTH|env.SOUTH|env.EAST|env.WEST);
        this.passages = [];
        for(let posX = 0; posX < this.width; posX++){
            let compoundIndex = posX;
            let testPassage = this.textGrid.charAt(compoundIndex);
            if(testPassage === '.'){ this.passages.push({x: posX, y: 0});}
            compoundIndex = (this.height-1)*this.width + posX;
            testPassage = this.textGrid.charAt(compoundIndex);
            if(testPassage === '.'){ this.passages.push({x: posX, y: this.height-1});}
        }
        for(let posY = 0; posY < this.height; posY++){
            let compoundIndex = posY*this.width;
            let testPassage = this.textGrid.charAt(compoundIndex);
            if(testPassage === '.'){ this.passages.push({x: 0, y: posY});}
            compoundIndex = posY*this.width + (this.width-1);
            testPassage = this.textGrid.charAt(compoundIndex);
            if(testPassage === '.'){ this.passages.push({x: this.width-1, y: posY});}
        }
        return this;
    }
};
const createTemplate = function (name, textGrid, options){
    if(!options){ options = {};}
    let width = options.width || env.DEFAULT_MAP_SIZE;
    let height = options.height || env.DEFAULT_MAP_SIZE;
    let correctedGrid = '';
    for(let posY = height-1; posY >= 0; posY--){
        let charIndex = posY*width;
        correctedGrid += textGrid.substring(charIndex, charIndex+width);
    }
    let newTemplate = env.instantiate(mapTemplate, name, correctedGrid, options);
    mapManager.templates.templateStorage[name] = newTemplate;
    if(newTemplate.boss){
        mapManager.templates.mapsBoss.push(name);
    } else if(!options.unlisted){
        mapManager.templates.maps.push(name);
    }
};

let mapLevel = 0;
createTemplate('dangerous to go alone', '\
######...######\
######...######\
######...######\
#####....######\
###......######\
###......######\
##............#\
#..........*..#\
...............\
...............\
...............\
#..*.......*..#\
#.............#\
#####.....#####\
#####.....#####', {unlisted: true});

createTemplate('test', '\
#####.....#####\
#.............#\
#.............#\
#.............#\
#..***...***..#\
..*...*.*...*..\
..*.....*...*..\
..*.....*...*..\
..*...*.*.*.*..\
...***...***...\
#..........**.#\
#.............#\
#.............#\
#.............#\
#####.....#####');

createTemplate('map'+(++mapLevel), '\
###############\
###############\
###.........###\
##...........##\
....*.*.*.*....\
...............\
#.............#\
#.....***.....#\
#.....***.....#\
...............\
...............\
##..*.*.*.*..##\
##...........##\
##...........##\
#####.....#####', {openSides: env.SOUTH|env.EAST|env.WEST});

createTemplate('map'+(++mapLevel), '\
#####.....#####\
#.........#####\
#.******..#####\
#.*....*..#....\
..*............\
#.**...*..*..**\
...............\
...............\
#.**...*..*..**\
..*............\
#.*....*..#....\
#.******..#####\
..........#####\
#.........#####\
####...#..#####');

createTemplate('map'+(++mapLevel), '\
#####.....#####\
###.#.....#####\
##.*#.....*#.##\
#..***...**#..#\
#..***...**#..#\
#.............#\
#..............\
#...*..........\
#..*...........\
#..............\
#..............\
#..*...........\
#..*..........#\
#.............#\
#####.....#####', {openSides: env.SOUTH|env.EAST|env.NORTH});


createTemplate('map'+(++mapLevel), '\
~~~~.*...*.~~~~\
~~~~.*...*.~~~~\
~~~~.*...*.~~~~\
~~~~.*...*.~~~~\
..............#\
..............#\
.....~~~~~....#\
.....~~~~~....#\
.....~~~~~....#\
.....~~~~~....#\
..............#\
~~~~~.....~~~~#\
~~~~~.....====.\
~~~~~.....~~~~#\
~~~~~.....~~~~#', {openSides: env.SOUTH|env.NORTH|env.WEST});

createTemplate('map'+(++mapLevel), '\
##..##...##..##\
#.............#\
#....*...*....#\
#.............#\
....~~~~~~~....\
....~~~~~~~....\
....~~~~~~~....\
....~~~~~~~....\
#.............#\
#.*.........*.#\
#.............#\
#.*.........*.#\
#.............#\
#.............#\
####.......####');

createTemplate('map'+(++mapLevel), '\
##~~~~~~~~#...#\
#~~~~~~~~~*...#\
#~~~~~~~~~*...#\
#*~~~~~~~~....#\
#.....*~~*....#\
..............#\
...............\
...............\
#..............\
#*~=~~*........\
~~~=~~~~......#\
#*~=~~~~*.....#\
..............#\
..............#\
######...#...##', {openSides: env.SOUTH|env.EAST|env.WEST});

createTemplate('map'+(++mapLevel), '\
######...######\
#*~~~*...*~~~*#\
#*~~~*...*~~~*#\
#*~~~*...*~~~*#\
#*...........*#\
#*...........*#\
...............\
...............\
...............\
#*...........*#\
#~~=~~...~~=~~#\
#~~=~~...~~=~~#\
...............\
...............\
######...######');

createTemplate('map'+(++mapLevel), '\
~~*~~~######..#\
#~~~~.~..*~~..#\
..............#\
........~~*~..#\
......~~......#\
...*.*........#\
...~...........\
...~...........\
#..~~..........\
#...~...~......\
#......~~......\
~......~~......\
~..~......*...*\
~...~.........*\
#...##...####**');

createTemplate('map'+(++mapLevel), '\
~~~~~....~~...#\
~~~~~....~~...#\
~~~~~....~~...#\
~~~~~....~~...#\
~~~~*.........#\
~~~**.........#\
#.............#\
#.............#\
#........***..#\
............**#\
..............*\
.............*#\
#.........***~#\
#.........~~~~#\
#######*~~~~###', {openSides: env.NORTH|env.WEST});

createTemplate('map'+(++mapLevel), '\
####..#########\
###...*####**##\
##....*#####*~#\
#......*####~~#\
........****~~#\
...............\
...............\
~**............\
~~.............\
~~.....~~~~...#\
~~.....~~~~...#\
~~.....~~~~...#\
~~............#\
~~............#\
~~.....####...#', {openSides: env.SOUTH|env.EAST|env.WEST});

createTemplate('map'+(++mapLevel), '\
####..#########\
#........######\
#.**..***######\
#.**....*######\
#........######\
#...**...######\
#**.**...######\
...............\
......*........\
#####.***...**#\
#####..........\
#####.....**...\
#####.....**...\
#####..........\
#####.....#####');

createTemplate('map'+(++mapLevel), '\
~~~~~#.......##\
~~~~~.........#\
~~~~~.........#\
...==...**....#\
...~~~..**....#\
....~~..**....#\
....~~.........\
....~~~........\
.....~~........\
.....~~..***..#\
.....~~..***..#\
.........***..#\
#.............#\
#.............#\
###############', {openSides: env.NORTH|env.EAST|env.WEST});

createTemplate('map'+(++mapLevel), '\
#...####....###\
#...........**#\
#...........**#\
#...*~~*......#\
#...*~~~......#\
#......~.......\
#*.....=.......\
#*....*~.......\
......~~.......\
.....~~~.......\
....*~~........\
....~~.........\
....=..........\
....~.........#\
####~#.....####');

createTemplate('map'+(++mapLevel), '\
~~~.*.....*.~~~\
~~~.........~~~\
~~~.*.....*.~~~\
~.............~\
~.*.*.....*.*.~\
~.............~\
~...*.....*...~\
~.............~\
~...*.....*...~\
~.............~\
~...*.....*...~\
~.............~\
~.............~\
~.............~\
~####.....####~', {openSides: env.SOUTH|env.NORTH});

createTemplate('map'+(++mapLevel), '\
#######~~..~..#\
#......~~..~..#\
#......==..~..#\
#.***..~~..~..#\
#.***..~~..~..#\
.......~~..~..#\
.......~~......\
#.***..~~......\
.......~~......\
.......~~......\
#.***...~~~...#\
#.***...~~~...#\
#.***.........#\
#.............#\
#####...###...#');

createTemplate('map'+(++mapLevel), '\
#####.....###~~\
#............~~\
#.***.......=~~\
#.**......~~=.#\
#.**.....~~~..#\
#.*......~~...#\
#.*...==~~....#\
#....~==~.....#\
#....~==....*.#\
#...~~......*.#\
#..~~~.....**.#\
#.=~~......**.#\
~~=.......***.#\
~~............#\
~~###.....#####', {openSides: env.SOUTH|env.NORTH});

createTemplate('map'+(++mapLevel), '\
~~~~......~~~~~\
~..........~~~~\
~..*.......~~.~\
~..~...*....~.~\
~..~...~....~.~\
~..~...~~.*.~.~\
~..=....~.~.=.~\
~..~....~.~.~.~\
~..~....~.*.~.~\
~*.~....~...~.*\
~..*...~~...~.~\
~......*......~\
*.............*\
#.............#\
#..#...##...#.#', {openSides: env.SOUTH|env.NORTH});

createTemplate('map'+(++mapLevel), '\
######.....####\
..............#\
..............#\
...##*...*....#\
...#*.....*...#\
...........*..#\
###*.......*..#\
###*.......*..#\
###*.......*..#\
###*.......*..#\
###*.......*..#\
...............\
...............\
...............\
#####.....#####');

createTemplate('map'+(++mapLevel), '\
####*.....*####\
...............\
...............\
#..~~.....~~..#\
#.~~~.....~~~.#\
#.~~.......~~.#\
#.....***..~~.#\
#.....***..~~.#\
#.....***..~~.#\
#.~~.......~~.#\
#.~~~.....~~~.#\
#..~~.....~~..#\
...............\
...............\
####*.....*####');

createTemplate('map'+(++mapLevel), '\
#####.....#####\
#.............#\
#.*.........*.#\
#..***...***..#\
#..***...***..#\
...............\
...............\
**.***...***.**\
...............\
...............\
###***...***..#\
###***...***..#\
#####.......*.#\
#####.........#\
#####.....#####');

createTemplate('map'+(++mapLevel), '\
~~~~~~~~~....##\
~~~~~~~~~.....#\
~~~~~~~~~.....#\
~~~~~~~~~.....#\
~~~~~~~~~......\
~~~~~~~~~......\
..~~~..........\
..~~~~~........\
....~~~........\
...............\
...............\
#.............#\
#.............#\
#.............#\
####.......####');

createTemplate('map'+(++mapLevel), '\
#..##.##..#####\
#..............\
#..............\
#..*~~~~*.*~*.#\
............~.#\
.....*~~~~*.~.#\
.........~..~.#\
..*......~..*.#\
..~......~.....\
~.~.*....~..*.#\
~.~~~....~*.~.#\
~.*.*.......*.#\
~.............#\
~.............#\
~...~~~~....#.#');

createTemplate('map'+(++mapLevel), '\
####.......####\
#.............#\
#.............#\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
#.............#\
#.............#\
####.......####');

createTemplate('map'+(++mapLevel), '\
##...##....####\
#.............#\
#.............#\
#....**.......#\
.....#~........\
.....#~~~......\
#...*#~~~......\
#...*#~~~......\
.....#~~~~*...#\
.....*####*...#\
.......**......\
#..............\
#..............\
#.............#\
####.......####');

createTemplate('map'+(++mapLevel), '\
~~~~~~.....****\
~..........****\
~..........****\
~...........***\
~....*...*..***\
~...**...**.***\
~...**...**...#\
~...**.........\
~...**.........\
~...**.........\
.....*****.*..#\
......***.....#\
..........*.*.#\
..............#\
###############', {openSides: env.NORTH|env.EAST|env.WEST});

createTemplate('map'+(++mapLevel), '\
###############\
...............\
...............\
...............\
......***.***.#\
..............#\
~~=~~~~=~~~~=~~\
~.............~\
~~=~~~~=~~~~=~~\
#.............#\
#.**.......**.#\
#.*.........*.#\
#.***.....***.#\
#.............#\
#####.....#####', {openSides: env.SOUTH|env.EAST|env.WEST});

createTemplate('map'+(++mapLevel), '\
#####.....#####\
#.............#\
#.*.*.....*.*.#\
#.............#\
#.*.........*.#\
...............\
......*.*......\
...............\
......*.*......\
...............\
#.*.........*.#\
#.............#\
#.*.*.....*.*.#\
#.............#\
#####.....#####');

createTemplate('map'+(++mapLevel), '\
~~~~...~...~~~~\
~~~~...~...~~~~\
~~~~...~...~~~~\
~~~*...=...*~~~\
.......~.......\
.......~.......\
.......~.......\
~~~=~~~~~~~=~~~\
.......~.......\
.......~.......\
.......~.......\
~~~*.......*~~~\
~~~~.......~~~~\
~~~~.......~~~~\
~~~~.......~~~~');

createTemplate('map'+(++mapLevel), '\
###############\
##.............\
#..............\
#..~~~.........\
##~~~~~###..###\
##~~~~~###..###\
###~~~####..###\
####~#####..###\
####~####....##\
####~###......#\
....~.........#\
....=.........#\
....=.......*.#\
....~.........#\
####~.......###', {openSides: env.SOUTH|env.EAST|env.WEST});

createTemplate('map'+(++mapLevel), '\
##..#.....#..##\
#.............#\
#.............#\
#.............#\
#...*.....*...#\
#.............#\
~~~~~~~=~~~~~~~\
...............\
...............\
...............\
....*.....*....\
...............\
...............\
#.............#\
#####.....#####');

createTemplate('map'+(++mapLevel), '\
######....~~~~~\
#.........~~~~~\
#..*......~~~~~\
#....*....~~~~~\
#..*......~~~~~\
#....*....~~~~~\
#..*......~~~~~\
#....*....~~~~~\
#..*......~~~~~\
#.........~~~~~\
#####.....~~~~~\
#####.....~~~~~\
#####.....~~~~~\
#####.....~~~~~\
#####*....~~~~~', {openSides: env.SOUTH|env.NORTH});

createTemplate('map'+(++mapLevel), '\
#####.....~####\
#.........~....\
#.*.*.....=....\
..........=....\
..........~....\
#.*.......~....\
#...*.....~~~~~\
#.*...*...~~~~~\
#...*.....~~~~~\
#.*.......~....\
..........~....\
..........=....\
#.*.*.....=....\
#.........~....\
#####.....~####');

createTemplate('map'+(++mapLevel), '\
###.....#######\
#.............#\
#..............\
#..............\
#..............\
#..............\
#........**.**#\
#***.***.**.**#\
#***.***.**.**#\
#***.***.**....\
#***...........\
...............\
...............\
...............\
#####.....#####');

createTemplate('map'+(++mapLevel), '\
#####.....#####\
...............\
...............\
...............\
###.##...##.###\
#.............#\
#..*.......*..#\
...............\
...............\
#..*.......*..#\
#.............#\
####.......####\
####.......####\
####.......####\
#####.....#####');

createTemplate('map'+(++mapLevel), '\
#.*.*.....*.*.#\
#.*.*.....*.*.#\
#.............#\
#.........*.*.#\
#..............\
#..............\
#...~~~........\
~~=~~~~~~~....#\
~~=~~~~~~~~~..#\
~~=~~~~~~~~~..#\
.....~~~~~~...#\
......~~~......\
...............\
...............\
###############', {openSides: env.NORTH|env.EAST|env.WEST});

createTemplate('map'+(++mapLevel), '\
###...###...###\
#.............#\
#.............#\
#..~~~~~~~~~..#\
#..~.......~..#\
...~.......=...\
...~.......=...\
...~.......~...\
...=.......~...\
...=.......~...\
#..~.......~..#\
#..~~~~~~~~~..#\
#.............#\
#.............#\
###...###...###');

createTemplate('map'+(++mapLevel), '\
#...###########\
#...#..........\
#..............\
#...#..........\
#...#######....\
#...#.....#....\
...............\
...............\
#...#.....#....\
######...######\
######...######\
#####.....#####\
#####.....#####\
#####.....#####\
#####.....#####', {openSides: env.SOUTH|env.EAST|env.NORTH});

createTemplate('map'+(++mapLevel), '\
###############\
###############\
###############\
~~~~~~~~~~~~~~~\
...............\
...............\
..........****#\
..............#\
#.........*.*.#\
#.............#\
#.........*.*.#\
#.............#\
#.........*.*.#\
#.............#\
##........#####', {openSides: env.SOUTH|env.EAST|env.WEST});

createTemplate('map'+(++mapLevel), '\
##........#####\
#..............\
#.........**..#\
#.*.......**..#\
#..............\
#..............\
#.*.......**..#\
#.........**..#\
#..............\
#.....=~==~~..#\
#..~~~=~==~~~~~\
~~~~~~=~..~~~~~\
~~~~~.....~~~~~\
~~~~~.....~~~~~\
~~~~~.....~~~~~', {openSides: env.SOUTH|env.EAST|env.NORTH});

createTemplate('map'+(++mapLevel), '\
~.....~~~~~..~~\
~~.....~~~~..~~\
~~~...~~~~~...~\
~~~==~~~..=...~\
~~~==~~...=..~~\
~~~..~~...~~~~~\
~~...==....~~~~\
~~...~~~....~~~\
~~...~~~.....~~\
~~=~~~~~~......\
~..~~~~~~~~....\
~..==....~~....\
~~~~~.....=....\
~~~~~.....=..~~\
~~~~~~...~~~~~~', {openSides: env.SOUTH|env.EAST|env.NORTH});

createTemplate('map'+(++mapLevel), '\
###.*.....*.###\
###.........###\
###.*.....*.###\
...............\
*.*.*.....*.*.*\
...............\
...............\
...............\
...............\
...............\
*****.....*.*.*\
####*..........\
####*.....*.###\
####*.......###\
####*.....*.###');

createTemplate('map'+(++mapLevel), '\
#####.....#####\
#####.....#####\
####..*....####\
####........###\
..##....*....##\
...............\
.....#....*....\
....###........\
.....###....*..\
#.....###......\
##.....#.....##\
###.......#####\
####......#####\
#####......####\
######.....####');

createTemplate('map'+(++mapLevel), '\
#........######\
#........######\
#........######\
#........######\
#........######\
#........######\
...............\
.........*.*...\
...............\
#..***...***..#\
#..***...***..#\
...............\
...............\
...............\
#####.....#####');

createTemplate('map'+(++mapLevel), '\
######........#\
..............#\
..............#\
...~~~~~~=~~~~~\
...~........*.#\
...=......*...#\
...=....*...*.#\
~~~~......*...#\
#.*.........*.#\
#...*.........#\
#.*...*.......#\
#...*.........#\
#.*...........#\
#.............#\
#######......##', {openSides: env.SOUTH|env.NORTH|env.WEST});

createTemplate('map'+(++mapLevel), '\
###############\
###############\
~~~~~~~~~~~~~~#\
..........###~#\
..........###~#\
..........###~#\
#.*.*.....###~#\
#.........###~#\
#.*.*.....#~~~~\
#.........#~~~~\
#.*.*.....#~~~~\
#.........#~~~~\
#.*.*.....#~~~~\
#.........#~~~~\
######....#~~~~', {openSides: env.SOUTH|env.WEST});

createTemplate('map'+(++mapLevel), '\
#......#......#\
#......#......#\
#......#......#\
#......#......#\
#......#......#\
##*..*###*..*##\
...............\
...............\
...............\
####*.....*####\
#####.....#####\
#####.....#####\
#####.....#####\
#####.....#####\
#####.....#####');

createTemplate('map'+(++mapLevel), '\
#######.#.#...#\
..............#\
#.*.*.*.*.*...#\
..............#\
#.*.*.*.*.*...#\
#.............#\
#.*.*.*.*.*...#\
#.............#\
~~=~~~.........\
~~=~~~.........\
~~=~~~.........\
....~..........\
....~..........\
....~.........#\
####~.....#####');

createTemplate('map'+(++mapLevel), '\
###############\
#####.....#####\
####.......####\
###.........###\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true, openSides: env.EAST|env.SOUTH|env.WEST, bossLocation: {x:7,y:11}});

createTemplate('map'+(++mapLevel), '\
####.......####\
####.......####\
####.......####\
####.*...*.####\
...............\
...*.*...*.*...\
...............\
...............\
...............\
...*.*...*.*...\
...............\
####.*...*.####\
####.......####\
####.......####\
####.......####', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...**.....**...\
...**.....**...\
...............\
...............\
...............\
...............\
...............\
...**.....**...\
...**.....**...\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#*...........*#\
...............\
....##...##....\
...###...###...\
...##.....##...\
...............\
...............\
...............\
...##.....##...\
...###...###...\
....##...##....\
...............\
#*...........*#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
#####....######\
#.........#####\
...........####\
...*........###\
.............##\
..............#\
..............#\
..............#\
..............#\
..............#\
.............##\
...*........###\
...........####\
#.........#####\
#####....######', {boss: true, openSides: env.NORTH|env.WEST|env.SOUTH});

createTemplate('map'+(++mapLevel), '\
###############\
#####.....#####\
#####.....#####\
#####.....#####\
#.............#\
#...*.....*...#\
#.............#\
#...*.....*...#\
#.............#\
#.*.*.....*.*.#\
...............\
...............\
...............\
#.............#\
#####.....#####', {boss: true, openSides: env.EAST|env.WEST|env.SOUTH});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
....~~~~~~~....\
...~~~~~~~~~...\
...~~~...~~~...\
...~~.....~~...\
...~~.....~~...\
...~~.....~~...\
...~~~...~~~...\
...~~~=~=~~~...\
....~~=~=~~....\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
~~~~.........##\
~~~~..........#\
====...........\
====...........\
~~~~...........\
~~~............\
~~~............\
~~.............\
~~.............\
~~.............\
~~.............\
===............\
===............\
~~~~..........#\
~~~~.........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...........*...\
..........**...\
...............\
........*.**...\
.......**.*....\
...............\
.....*.**......\
....**.*.......\
...............\
#.............#\
##...........##', {boss: true, bossLocation: {x:6,y:6}});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##...........##\
#.............#\
...............\
...............\
...............\
.....*.........\
...............\
.........*.....\
...............\
.....*.........\
...............\
...............\
...............\
#.............#\
##...........##', {boss: true});

createTemplate('map'+(++mapLevel), '\
##....###....##\
#.............#\
#.............#\
#.............#\
#.............#\
#.............#\
#.............#\
#~~~.......~~~#\
#~~~.......~~~#\
#~~~.......~~~#\
#.............#\
#.............#\
#.............#\
#.............#\
#####.....#####', {boss: true, openSides: env.SOUTH, bossLocation: {x:7,y:12}});


createTemplate('map'+(++mapLevel), '\
#####.....#####\
#####.....#####\
#####.....#####\
#.............#\
#.............#\
#.*.*.....*.*.#\
#.............#\
#.............#\
#.............#\
#.*.*.....*.*.#\
#.............#\
#.............#\
#####.....#####\
#####.....#####\
#####.....#####', {boss: true, openSides: env.SOUTH, bossLocation: {x:7,y:13}});